<!DOCTYPE html>
<html>
<head>
    <title>Student Performance Analyzer</title>
</head>
<body>

<h2>Student Performance Analyzer</h2>
<button onclick="analyzeStudents()">Run Analysis</button>

<pre id="output"></pre>

<script>

let students = [
  { name: "Akhil", marks: 85 },
  { name: "Priya", marks: 72 },
  { name: "Ravi", marks: 90 },
  { name: "Meena", marks: 45 },
  { name: "Karan", marks: 30 }
];

function analyzeStudents() {

    let result = "";

    // 1. Passed students (filter)
    let passed = students.filter(s => s.marks >= 40);
    result += "1. Passed Students:\n";
    passed.forEach(s => result += s.name + " - " + s.marks + "\n");
    result += "\n";

    // 2. Distinction students (filter)
    let distinction = students.filter(s => s.marks >= 85);
    result += "2. Distinction Students:\n";
    distinction.forEach(s => result += s.name + " - " + s.marks + "\n");
    result += "\n";

    // 3. Class average (reduce)
    let avg = students.reduce((sum, s) => sum + s.marks, 0) / students.length;
    result += "3. Class Average: " + avg.toFixed(2) + "\n\n";

    // 4. Find topper (sort or reduce)
    let topper = students.reduce((max, s) => s.marks > max.marks ? s : max);
    result += "4. Topper: " + topper.name + " (" + topper.marks + ")\n\n";

    // 5. Count failed students
    let failedCount = students.filter(s => s.marks < 40).length;
    result += "5. Failed Students Count: " + failedCount + "\n\n";

    // 6. Convert marks to grades (map)
    let graded = students.map(s => {
        let grade = "";
        if (s.marks >= 85) grade = "A";
        else if (s.marks >= 60) grade = "B";
        else if (s.marks >= 40) grade = "C";
        else grade = "Fail";
        return { ...s, grade: grade };
    });

    result += "6. Grades:\n";
    graded.forEach(s => result += s.name + " - " + s.grade + "\n");
    result += "\n";

    // -------- Bonus --------

    // Add rank to each student (sort + map)
    let ranked = [...students]
        .sort((a, b) => b.marks - a.marks)
        .map((s, index) => ({ ...s, rank: index + 1 }));

    result += "Bonus 1: Ranking:\n";
    ranked.forEach(s => result += s.rank + ". " + s.name + " - " + s.marks + "\n");
    result += "\n";

    // Remove lowest scorer (find + filter)
    let lowest = students.reduce((min, s) => s.marks < min.marks ? s : min);
    let updatedList = students.filter(s => s.name !== lowest.name);

    result += "Bonus 2: Removed Lowest Scorer: " + lowest.name + "\n\n";

    // Leaderboard sorted by marks
    let leaderboard = [...students].sort((a, b) => b.marks - a.marks);
    result += "Bonus 3: Leaderboard:\n";
    leaderboard.forEach(s => result += s.name + " - " + s.marks + "\n");

    document.getElementById("output").textContent = result;
}

</script>

</body>
</html>