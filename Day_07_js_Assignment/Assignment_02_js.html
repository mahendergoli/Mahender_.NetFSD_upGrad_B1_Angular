<!DOCTYPE html>
<html>
<head>
    <title>Live Form Validation</title>
</head>
<body>

<h2 style="color: red; text-align: center;">Registration Form</h2>

<label>Name:</label>
<input type="text" id="name" onchange="validateName()">
<p id="nameMsg" style="color:red;"></p>

<label>Email:</label>
<input type="text" id="email" onchange="validateEmail()">
<p id="emailMsg" style="color:red;"></p>

<label>Age:</label>
<input type="number" id="age" onchange="validateAge()">
<p id="ageMsg" style="color:red;"></p>

<br>
<button onclick="submitForm()">Submit</button>

<p id="finalMsg" style="color:green;"></p>

<script>
    let isNameValid = false;
    let isEmailValid = false;
    let isAgeValid = false;

    function validateName() {
        let name = document.getElementById("name").value;

        if (name.trim() === "") {
            document.getElementById("nameMsg").innerHTML = "Name cannot be empty";
            isNameValid = false;
        } else {
            document.getElementById("nameMsg").innerHTML = "";
            isNameValid = true;
        }
    }

    function validateEmail() {
        let email = document.getElementById("email").value;

        if (email.includes("@")) {
            document.getElementById("emailMsg").innerHTML = "";
            isEmailValid = true;
        } else {
            document.getElementById("emailMsg").innerHTML = "Email must contain @";
            isEmailValid = false;
        }
    }

    function validateAge() {
        let age = Number(document.getElementById("age").value);

        if (age > 18) {
            document.getElementById("ageMsg").innerHTML = "";
            isAgeValid = true;
        } else {
            document.getElementById("ageMsg").innerHTML = "Age must be greater than 18";
            isAgeValid = false;
        }
    }

    function submitForm() {

        if (isNameValid && isEmailValid && isAgeValid) {

            let userData = {
                name: document.getElementById("name").value,
                email: document.getElementById("email").value,
                age: document.getElementById("age").value
            };

            sessionStorage.setItem("user", JSON.stringify(userData));

            document.getElementById("finalMsg").innerHTML = "Registration Successful! Data stored in session.";
        } else {
            document.getElementById("finalMsg").innerHTML = "Please fix validation errors before submitting.";
        }
    }
</script>

</body>
</html>